```mermaid
sequenceDiagram
    participant User
    participant UI as Frontend UI
    participant APIClient
    participant Backend as Backend (/api)
    participant Agents as Agents (Intent/Retrieval)

    User->>UI: enters query
    UI->>APIClient: postQuery / streamQuery
    APIClient->>Backend: POST /api/v1/query

    Note right of Backend: Backend returns JSON.<br/>No SSE by default.

    Backend->>Agents: intent -> retrieval -> generation
    Agents-->>Backend: validated_answer + citations
    Backend-->>APIClient: JSON response
    APIClient-->>UI: deliver answer
    UI-->>User: render answer

    rect rgb(240, 248, 255)
        Note right of User: Authentication Flow
        User->>UI: submits credentials
        UI->>APIClient: POST /api/auth/login
        APIClient-->>UI: token (access_token)
        UI-->>User: save token
    end
```
